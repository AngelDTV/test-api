"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const User_1 = __importDefault(global[Symbol.for('ioc.use')]("App/Models/User"));
class UsersController {
    async register({ request, response }) {
        const data = request.only(['email', 'password']);
        const user = await User_1.default.create(data);
        return response.created(user);
    }
    async login({ request, response, auth }) {
        const data = request.only(['email', 'password']);
        const token = await auth.use('api').attempt(data.email, data.password);
        return response.ok({ token });
    }
}
exports.default = UsersController;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVXNlcnNDb250cm9sbGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiVXNlcnNDb250cm9sbGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBRUEsaUZBQWtDO0FBRWxDLE1BQXFCLGVBQWU7SUFFbEMsS0FBSyxDQUFDLFFBQVEsQ0FBRSxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUM7UUFDbEMsTUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLE9BQU8sRUFBRSxVQUFVLENBQUMsQ0FBQyxDQUFBO1FBQ2hELE1BQU0sSUFBSSxHQUFHLE1BQU0sY0FBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQTtRQUNwQyxPQUFPLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDL0IsQ0FBQztJQUNELEtBQUssQ0FBQyxLQUFLLENBQUUsRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRTtRQUN0QyxNQUFNLElBQUksR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxDQUFDLENBQUE7UUFDaEQsTUFBTSxLQUFLLEdBQUcsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQTtRQUN0RSxPQUFPLFFBQVEsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFBO0lBQy9CLENBQUM7Q0FFRjtBQWJELGtDQWFDIiwic291cmNlc0NvbnRlbnQiOlsiLy8gaW1wb3J0IHsgSHR0cENvbnRleHRDb250cmFjdCB9IGZyb20gJ0Bpb2M6QWRvbmlzL0NvcmUvSHR0cENvbnRleHQnXG5cbmltcG9ydCBVc2VyIGZyb20gXCJBcHAvTW9kZWxzL1VzZXJcIlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVc2Vyc0NvbnRyb2xsZXIge1xuXG4gIGFzeW5jIHJlZ2lzdGVyICh7IHJlcXVlc3QsIHJlc3BvbnNlfSkge1xuICAgIGNvbnN0IGRhdGEgPSByZXF1ZXN0Lm9ubHkoWydlbWFpbCcsICdwYXNzd29yZCddKVxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyLmNyZWF0ZShkYXRhKVxuICAgIHJldHVybiByZXNwb25zZS5jcmVhdGVkKHVzZXIpXG4gIH1cbiAgYXN5bmMgbG9naW4gKHsgcmVxdWVzdCwgcmVzcG9uc2UsIGF1dGggfSkge1xuICAgIGNvbnN0IGRhdGEgPSByZXF1ZXN0Lm9ubHkoWydlbWFpbCcsICdwYXNzd29yZCddKVxuICAgIGNvbnN0IHRva2VuID0gYXdhaXQgYXV0aC51c2UoJ2FwaScpLmF0dGVtcHQoZGF0YS5lbWFpbCwgZGF0YS5wYXNzd29yZClcbiAgICByZXR1cm4gcmVzcG9uc2Uub2soeyB0b2tlbiB9KVxuICB9XG5cbn1cbiJdfQ==